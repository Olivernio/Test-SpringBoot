<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ElevenLabs Voice Selector</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    select, button, textarea {
      margin-top: 10px;
      padding: 5px;
      width: 100%;
      box-sizing: border-box;
    }
    #status {
      margin-top: 20px;
      color: green;
    }
  </style>
</head>
<body>
  <h2>Selecciona una voz de ElevenLabs</h2>
  <select id="voiceSelect">
    <option value="">Cargando voces...</option>
  </select>
  <textarea id="textInput" rows="4" placeholder="Escribe el texto que deseas escuchar..."></textarea>
  <button onclick="playText()">‚ñ∂Ô∏è Reproducir</button>
  <button onclick="pauseOrResumeAudio()">‚è∏Ô∏è Pausar/Reanudar</button>
  <button onclick="loadVoices()">üîÑ Recargar Voces</button>
  <div id="status"></div>

  <script>
    const apiKey = "sk_1a23cde668fc657bce32db522b74fe25b6bbe1b8b7c3407b";
    let currentAudio = null;
    let isPaused = false;

    const staticVoices = [
      { id: "9BWtsMINqrJLrRacOk9x", name: "Aria", language: "Ingl√©s" },
      { id: "EXAVITQu4vr4xnSDxMaL", name: "Sarah", language: "Ingl√©s" },
      { id: "FGY2WhTYpPnrIDTdsKH5", name: "Laura", language: "Ingl√©s" },
      { id: "IKne3meq5aSn9XLyUdCD", name: "Charlie", language: "Ingl√©s" },
      { id: "JBFqnCBsd6RMkjVDRZzb", name: "George", language: "Ingl√©s" },
      { id: "N2lVS1w4EtoT3dr4eOWO", name: "Callum", language: "Ingl√©s" },
      { id: "SAz9YHcvj6GT2YYXdXww", name: "River", language: "Ingl√©s" },
      { id: "TX3LPaxmHKxFdv7VOQHJ", name: "Liam", language: "Ingl√©s" },
      { id: "XB0fDUnXU5powFXDhCwa", name: "Charlotte", language: "Ingl√©s" },
      { id: "Xb7hH8MSUJpSbSDYk0k2", name: "Alice", language: "Ingl√©s" },
      { id: "XrExE9yKIg1WjnnlVkGX", name: "Matilda", language: "Ingl√©s" },
      { id: "bIHbv24MWmeRgasZH58o", name: "Will", language: "Ingl√©s" },
      { id: "cgSgspJ2msm6clMCkdW9", name: "Jessica", language: "Ingl√©s" },
      { id: "cjVigY5qzO86Huf0OWal", name: "Eric", language: "Ingl√©s" },
      { id: "iP95p4xoKVk53GoZ742B", name: "Chris", language: "Ingl√©s" },
      { id: "nPczCjzI2devNBz1zQrb", name: "Brian", language: "Ingl√©s" },
      { id: "onwK4e9ZLuTAKqWW03F9", name: "Daniel", language: "Ingl√©s" },
      { id: "pFZP5JQG7iQjIQuC4Bku", name: "Lily", language: "Ingl√©s" },
      { id: "pqHfZKP75CvOlQylNhV4", name: "Bill", language: "Ingl√©s" },
      { id: "ljWLDJb7OMkYo3VM9z8g", name: "El Nero", language: "Ingl√©s" },
      { id: "9TcPbUAhHnAV8mzFDAWU", name: "El Faraon 2 - Ancient Narrator", language: "Espa√±ol" },
      { id: "kjHz50TasdqbpbfK4uaN", name: "Melissa - Young voice from Costa Rica", language: "Espa√±ol" },
      { id: "cPoqAvGWCPfCfyPMwe4z", name: "Kallixis - Monster & Deep", language: "Espa√±ol" },
      { id: "8lbMAldPdNgaVy6tKwSs", name: "Mario - Warm Storyteller", language: "Espa√±ol" },
      { id: "dy2OtpAv7rTroA3VBRUd", name: "Alex Comunicando", language: "Espa√±ol" },
      { id: "tXgbXPnsMpKXkuTgvE3h", name: "Elena - Stories and Narrations", language: "Espa√±ol" },
      { id: "SKjgN71N3MeGl4r2JbRt", name: "Bruno Torres", language: "Espa√±ol" },
      { id: "4enMglmEIYpK0bGn0QuZ", name: "Lizy - Mystery Stories", language: "Espa√±ol" }
    ];

    function loadVoices() {
      const select = document.getElementById("voiceSelect");
      select.innerHTML = "";
      staticVoices.forEach(v => {
        const option = document.createElement("option");
        option.value = v.id;
        option.textContent = `${v.name} [${v.language}]`;
        select.appendChild(option);
      });
      document.getElementById("status").textContent = `‚úÖ Se cargaron ${staticVoices.length} voces.`;
    }

    async function playText() {
      const voiceId = document.getElementById("voiceSelect").value;
      const text = document.getElementById("textInput").value.trim();
      if (!voiceId || !text) {
        alert("Selecciona una voz y escribe un texto.");
        return;
      }

      if (currentAudio) {
        currentAudio.pause();
        currentAudio = null;
        isPaused = false;
      }

      const payload = {
        text: text,
        //model_id: "eleven_turbo_v2",
        //model_id: "eleven_multilingual_v2",
        //model_id: "eleven_turbo_v2_5",
        model_id: "eleven_flash_v2_5",
        // voice_settings: {
        //   stability: 0.75,
        //   similarity_boost: 0.8,
        //   style: 0.0,
        //   use_speaker_boost: true
        // }
        voice_settings: {
          stability: 0.1,
          similarity_boost: 0.5,
          style: 0.3,
          use_speaker_boost: true
        }
      };

      try {
        const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${voiceId}`, {
          method: "POST",
          headers: {
            "Accept": "audio/mpeg",
            "Content-Type": "application/json",
            "xi-api-key": apiKey
          },
          body: JSON.stringify(payload)
        });

        if (!response.ok) throw new Error("No se pudo generar el audio");

        const blob = await response.blob();
        const url = URL.createObjectURL(blob);
        currentAudio = new Audio(url);
        currentAudio.play();
        isPaused = false;
      } catch (error) {
        document.getElementById("status").textContent = `‚ùå ${error.message}`;
      }
    }

    function pauseOrResumeAudio() {
      if (currentAudio) {
        if (isPaused) {
          currentAudio.play();
          isPaused = false;
        } else {
          currentAudio.pause();
          isPaused = true;
        }
      }
    }

    loadVoices();
  </script>
</body>
</html>
